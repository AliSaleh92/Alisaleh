<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AliW | Ù†Ø¸Ø§Ù… Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„</title>
  <link href="https://fonts.googleapis.com/css?family=Tajawal:600,900&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <style>
    :root {
      --bg-main: #f6f7fa;
      --bg-side: #fff;
      --bg-card: #fff;
      --txt-main: #232644;
      --txt-sub: #5f6188;
      --accent: #2563eb;
      --kanban-back: #f2f7fa;
      --priority-high: #e53935;
      --priority-med: #fb8c00;
      --priority-low: #2196f3;
    }
    [data-theme="dark"] {
      --bg-main: #171823;
      --bg-side: #222;
      --bg-card: #222432;
      --txt-main: #fff;
      --txt-sub: #b8bcd0;
      --accent: #43b3fa;
      --kanban-back: #23272c;
      --priority-high: #ef4444;
      --priority-med: #ffc340;
      --priority-low: #60a5fa;
    }
    body {
      background: var(--bg-main);
      color: var(--txt-main);
      font-family: "Tajawal", Arial, sans-serif;
      margin: 0;
      transition: background 0.2s;
    }
    .header-app {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--bg-side);
      padding: 21px 25px 17px 25px;
      font-weight: 900;
      font-size: 1.32em;
      border-bottom: 1.5px solid #dde1e941;
    }
    .theme-switch {
      font-size: 1.3em;
      border: none;
      background: var(--kanban-back);
      padding: 6px 18px;
      border-radius: 11px;
      color: var(--accent);
      cursor: pointer;
      margin-right: 11px;
    }
    .sidebar {
      position: fixed;
      top: 0;
      right: 0;
      width: 72px;
      height: 100vh;
      background: var(--bg-side);
      padding-top: 11px;
      box-shadow: -1px 0 15px #23395b18;
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 200;
    }
    .logo {
      font-weight: 900;
      color: var(--accent);
      font-size: 1.42em;
      margin-bottom: 44px;
    }
    .menu-nav {
      display: flex;
      flex-direction: column;
      gap: 14px;
      width: 100%;
    }
    .menu-item {
      color: var(--txt-sub);
      padding: 15px 0;
      text-align: center;
      cursor: pointer;
      transition: 0.16s;
      font-size: 1.41em;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-weight: bold;
    }
    .menu-item.active,
    .menu-item:hover {
      background: var(--accent);
      color: #fff;
    }
    .menu-icon {
      font-size: 1.16em !important;
    }
    .main-content {
      margin-right: 92px;
      padding: 36px 4vw 55px 4vw;
      max-width: 1200px;
    }
    .section {
      display: none;
    }
    .section.active {
      display: block;
    }
    .section-title {
      font-family: inherit;
      color: var(--accent);
      font-weight: 900;
      margin: 0 0 18px 0;
      font-size: 1.4em;
    }
    /* Kanban */
    .kanban-board {
      display: flex;
      gap: 2vw;
      padding-top: 24px;
      overflow-x: auto;
      min-height: 310px;
    }
    .kanban-col {
      flex: 1;
      min-width: 222px;
      background: var(--kanban-back);
      border-radius: 15px;
      padding: 12px 10px 30px 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      box-shadow: 0 2px 14px #23395b11;
    }
    .kanban-title {
      font-weight: 900;
      text-align: center;
      color: var(--accent);
      letter-spacing: 0.02em;
      margin-top: 0;
      margin-bottom: 11px;
    }
    .kanban-tasks {
      min-height: 25px;
    }
    .kanban-task {
      background: var(--bg-card);
      color: var(--txt-main);
      border-radius: 13px;
      border: 1px solid #e3e6f89b;
      box-shadow: 0 2px 7px #23395b10;
      padding: 13px 10px 8px 7px;
      display: flex;
      flex-direction: column;
      gap: 3px;
      margin-bottom: 3px;
      font-size: 1.09em;
    }
    .kanban-task[draggable="true"] {
      opacity: 0.96;
    }
    .kb-title-row {
      display: flex;
      align-items: center;
      font-weight: bold;
      gap: 5px;
    }
    .kb-task-prio {
      border-radius: 55px;
      color: #fff;
      padding: 0 11px 1.5px 11px;
      font-size: 1.02em;
      font-weight: 700;
      margin-left: 6px;
    }
    .kb-task-prio.high {
      background: var(--priority-high);
    }
    .kb-task-prio.med {
      background: var(--priority-med);
    }
    .kb-task-prio.low {
      background: var(--priority-low);
    }
    .kb-actions-row {
      display: flex;
      gap: 3px;
      margin-top: 3px;
    }
    .kb-actions-row button {
      font-size: 1em;
      background: #eceff675;
      color: var(--accent);
      border: 0;
      padding: 2.5px 12px 2.5px 12px;
      border-radius: 8px;
      cursor: pointer;
    }
    .kb-actions-row button.del {
      color: var(--priority-high);
    }
    .kb-actions-row button:active {
      background: var(--accent);
      color: #fff;
    }
    .kb-desc {
      color: var(--txt-sub);
      font-size: 0.98em;
    }
    .kb-date {
      color: var(--accent);
      font-size: 0.97em;
    }
    .kanban-add {
      margin-top: 35px;
      display: flex;
      gap: 5px;
    }
    .kanban-add input,
    .kanban-add select {
      padding: 6px 5px;
      font-size: 1.07em;
      border-radius: 8px;
      border: 1.2px solid #dad4e2;
    }
    .kanban-add button {
      background: var(--accent);
      color: #fff;
      padding: 7px 17px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }
    .kanban-add button:hover {
      background: #0e388b;
    }
    /* Ù…Ø´Ø§Ø±ÙŠØ¹ */
    .projects-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 15px;
    }
    .project-card {
      background: var(--bg-card);
      border-radius: 15px;
      box-shadow: 0 2px 9px #1d338809;
      padding: 16px 17px;
    }
    .project-title {
      color: var(--accent);
      font-weight: 900;
      font-size: 1.14em;
    }
    .project-info {
      color: var(--txt-sub);
      font-size: 1em;
      margin: 7px 0 10px 0;
    }
    /* Ù…Ù„Ø§Ø­Ø¸Ø§Øª */
    .notes-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 15px;
    }
    .note-card {
      background: var(--bg-card);
      border-radius: 14px;
      box-shadow: 0 2px 8px #2b457b14;
      padding: 13px 15px;
      font-size: 1.06em;
    }
    .note-title {
      font-weight: 900;
      color: var(--accent);
      margin-bottom: 6px;
    }
    /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª - Ø¨Ø³ÙŠØ· */
    .settings-box {
      background: var(--bg-card);
      border-radius: 14px;
      box-shadow: 0 1px 7px #23395b12;
      padding: 16px;
      width: 99%;
      max-width: 420px;
    }
    .settings-box label {
      font-weight: bold;
      margin-bottom: 6px;
      display: block;
    }
    .settings-row {
      margin-bottom: 14px;
    }
    .settings-btn {
      background: var(--accent);
      color: #fff;
      padding: 7px 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }
    @media (max-width: 1000px) {
      .main-content {
        padding: 17px 2vw 45px 2vw;
      }
    }
    @media (max-width: 650px) {
      .sidebar {
        position: fixed;
        width: 100vw;
        height: 64px;
        flex-direction: row;
        top: auto;
        bottom: 0;
        left: 0;
        right: 0;
      }
      .main-content {
        margin: 0 !important;
        padding: 11px 0 74px 0;
      }
      .logo {
        display: none;
      }
    }
  </style>
</head>
<body data-theme="light">
  <div class="header-app">
    <span>AliW | Ù…Ø³Ø§Ø­Ø© Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ø¹ØµØ±ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©</span>
    <button class="theme-switch" onclick="toggleTheme()" id="themeToggle">ğŸŒ™</button>
  </div>
  <div class="sidebar">
    <div class="logo">AliW</div>
    <div class="menu-nav">
      <div class="menu-item active" onclick="showSection('kanban')">
        <span class="material-icons menu-icon">checklist</span>
        <div style="font-size: .74em">Ø§Ù„Ù…Ù‡Ø§Ù…</div>
      </div>
      <div class="menu-item" onclick="showSection('projects')">
        <span class="material-icons menu-icon">folder</span>
        <div style="font-size: .74em">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</div>
      </div>
      <div class="menu-item" onclick="showSection('notes')">
        <span class="material-icons menu-icon">sticky_note_2</span>
        <div style="font-size: .74em">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
      </div>
      <div class="menu-item" onclick="showSection('settings')">
        <span class="material-icons menu-icon">settings</span>
        <div style="font-size: .74em">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
      </div>
    </div>
  </div>
  <div class="main-content">
    <!-- Ø§Ù„Ù…Ù‡Ø§Ù… -->
    <div class="section active" id="kanban" tabindex="0">
      <div class="section-title">Ø§Ù„Ù…Ù‡Ø§Ù… â€“ Ù„ÙˆØ­Ø© ÙƒØ§Ù†Ø¨Ø§Ù†</div>
      <div class="kanban-board" id="kanbanBoard"></div>
      <form class="kanban-add" onsubmit="addTask();return false;">
        <input type="text" id="taskTitle" placeholder="Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ù…Ù‡Ù…Ø©" maxlength="85" aria-label="Task title" />
        <select id="taskPrio" aria-label="Priority">
          <option value="high">Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©</option>
          <option value="med" selected>Ù…ØªÙˆØ³Ø·Ø©</option>
          <option value="low">Ù…Ù†Ø®ÙØ¶Ø©</option>
        </select>
        <button type="submit" aria-label="Add task">Ø¥Ø¶Ø§ÙØ©</button>
      </form>
    </div>
    <!-- Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ -->
    <div class="section" id="projects" tabindex="0">
      <div class="section-title">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</div>
      <form style="margin-bottom: 18px; display: flex; gap: 5px" onsubmit="addProject();return false;">
        <input
          type="text"
          id="projTitle"
          maxlength="40"
          placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"
          aria-label="Project name"
        />
        <button type="submit" aria-label="Add project">Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹</button>
      </form>
      <div class="projects-list" id="projectsList" role="list" aria-live="polite"></div>
    </div>
    <!-- Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª -->
    <div class="section" id="notes" tabindex="0">
      <div class="section-title">Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
      <form style="margin-bottom: 18px; display: flex; gap: 5px" onsubmit="addNote();return false;">
        <input
          id="noteTitle"
          maxlength="33"
          placeholder="Ø¹Ù†ÙˆØ§Ù†"
          aria-label="Note title"
          type="text"
        />
        <input
          id="noteBody"
          maxlength="88"
          placeholder="Ø§Ù„Ù…Ø­ØªÙˆÙ‰"
          style="width: 30%"
          aria-label="Note content"
          type="text"
        />
        <button type="submit" aria-label="Add note">Ø¥Ø¶Ø§ÙØ©</button>
      </form>
      <div class="notes-list" id="notesList" role="list" aria-live="polite"></div>
    </div>
    <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
    <div class="section" id="settings" tabindex="0">
      <div class="section-title">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
      <div class="settings-box" role="region" aria-labelledby="settings-title">
        <div class="settings-row">
          <label for="themeToggle2">Ø§Ù„Ø«ÙŠÙ…:</label>
          <button onclick="toggleTheme()" class="settings-btn" id="themeToggle2" aria-pressed="false"
            >ØªØ¨Ø¯ÙŠÙ„ Ø¯Ø§ÙƒÙ†/ÙØ§ØªØ­</button
          >
        </div>
        <div class="settings-row">
          <label>ØªØµØ¯ÙŠØ± ÙˆØ§Ø³ØªÙŠØ±Ø§Ø¯ (Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©)</label>
          <button onclick="exportAllData()" class="settings-btn" aria-label="Export Backup Data">
            ØªØµØ¯ÙŠØ± ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
          </button>
          <input
            type="file"
            style="display: none"
            id="importInput"
            accept=".json"
            onchange="importAllDataFile(event)"
            aria-label="Import data file"
          />
          <button onclick="document.getElementById('importInput').click()" class="settings-btn" aria-label="Import Backup Data">
            Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
          </button>
        </div>
      </div>
    </div>
  </div>
  <script>
    /* ----------------- Ø§Ù„Ø«ÙŠÙ… ÙˆØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ------------------ */
    let currentSec = "kanban";
    function showSection(sec) {
      document.querySelectorAll(".menu-item").forEach((el, i) => {
        el.classList.toggle(
          "active",
          ["kanban", "projects", "notes", "settings"].indexOf(sec) === i
        );
      });
      document.querySelectorAll(".section").forEach((el) =>
        el.classList.remove("active")
      );
      document.getElementById(sec).classList.add("active");
      if (sec === "kanban") renderKanban();
      if (sec === "projects") renderProjects();
      if (sec === "notes") renderNotes();
    }
    function toggleTheme() {
      let th = document.body.dataset.theme == "light" ? "dark" : "light";
      document.body.dataset.theme = th;
      document.getElementById("themeToggle").textContent =
        th == "dark" ? "â˜€ï¸" : "ğŸŒ™";
      let btn2 = document.getElementById("themeToggle2");
      if (btn2) btn2.textContent = th == "dark" ? "ØªÙØºÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø±" : "ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†";
      localStorage.setItem("theme_mode", th);
    }
    if (localStorage.getItem("theme_mode")) {
      document.body.dataset.theme = localStorage.getItem("theme_mode");
      document.getElementById("themeToggle").textContent =
        document.body.dataset.theme == "dark" ? "â˜€ï¸" : "ğŸŒ™";
    }
    /* ------------------- Ø§Ù„ÙƒØ§Ù†Ø¨Ø§Ù†: Ù…Ù‡Ø§Ù… ------------------------- */
    const taskStates = ["new", "progress", "done", "hold", "cancel"];
    const stateLabels = {
      new: "Ø¬Ø¯ÙŠØ¯Ø©",
      progress: "Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²",
      done: "Ù…ÙƒØªÙ…Ù„Ø©",
      hold: "Ù…Ø¹Ù„Ù‚Ø©",
      cancel: "Ù…Ù„ØºØ§Ø©",
    };
    const prioLabels = { high: "Ø¹Ø§Ù„ÙŠØ©", med: "Ù…ØªÙˆØ³Ø·Ø©", low: "Ù…Ù†Ø®ÙØ¶Ø©" };
    const prioClasses = { high: "high", med: "med", low: "low" };
    let tasks = JSON.parse(localStorage.getItem("kanban_tasks") || "[]");
    function renderKanban() {
      let board = document.getElementById("kanbanBoard");
      board.innerHTML = "";
      taskStates.forEach((state) => {
        let col = document.createElement("div");
        col.className = "kanban-col";
        col.dataset.state = state;
        col.innerHTML = `<div class="kanban-title">${stateLabels[state]}</div>
        <div class="kanban-tasks" id="tasks-${state}" ondrop="drop(event,'${state}')" ondragover="allowDrop(event)"></div>`;
        board.appendChild(col);
      });
      tasks.forEach((t, i) => {
        let card = document.createElement("div");
        card.className = "kanban-task";
        card.draggable = true;
        card.ondragstart = function (e) {
          e.dataTransfer.setData("task-index", i);
        };
        card.innerHTML = `<div class="kb-title-row">
          <span class="kb-task-prio ${prioClasses[t.prio]}">${prioLabels[t.prio]}</span>
          <b>${t.title}</b>
          </div>
          <div class="kb-desc">${t.desc ? t.desc : ""}</div>
          <div class="kb-date">${t.date ? t.date : ""}</div>
          <div class="kb-actions-row">
            <button onclick="editTask(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
            <button onclick="delTask(${i})" class="del">Ø­Ø°Ù</button>
          </div>`;
        document.getElementById("tasks-" + t.state).appendChild(card);
      });
    }
    function addTask() {
      let title = document.getElementById("taskTitle").value.trim();
      let prio = document.getElementById("taskPrio").value;
      if (!title) return alert("Ø±Ø¬Ø§Ø¡Ù‹ Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ù…Ù‡Ù…Ø©");
      tasks.push({ title, prio, state: "new", desc: "", date: new Date().toLocaleString("ar-EG") });
      localStorage.setItem("kanban_tasks", JSON.stringify(tasks));
      document.getElementById("taskTitle").value = "";
      renderKanban();
    }
    function delTask(i) {
      if (confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ")) {
        tasks.splice(i, 1);
        localStorage.setItem("kanban_tasks", JSON.stringify(tasks));
        renderKanban();
      }
    }
    function editTask(i) {
      let t = tasks[i];
      let newTitle = prompt("ØªØ¹Ø¯ÙŠÙ„ Ù†Øµ Ø§Ù„Ù…Ù‡Ù…Ø©", t.title);
      if (newTitle != null && newTitle.trim()) {
        t.title = newTitle;
        localStorage.setItem("kanban_tasks", JSON.stringify(tasks));
        renderKanban();
      }
    }
    function allowDrop(evt) {
      evt.preventDefault();
    }
    function drop(evt, newState) {
      evt.preventDefault();
      let idx = +evt.dataTransfer.getData("task-index");
      tasks[idx].state = newState;
      localStorage.setItem("kanban_tasks", JSON.stringify(tasks));
      renderKanban();
    }
    window.onload = () => {
      renderKanban();
      renderProjects();
      renderNotes();
    };
    /* ------------------ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ --------------------- */
    let projects = JSON.parse(localStorage.getItem("aw_projects") || "[]");
    function renderProjects() {
      let grid = document.getElementById("projectsList");
      if (!projects.length) {
        grid.innerHTML = '<div style="color:var(--txt-sub);padding:31px 0;text-align:center">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¹Ø¯.</div>';
        return;
      }
      grid.innerHTML = projects
        .map(
          (p, i) => `
    <div class="project-card">
      <div class="project-title">${p.name}</div>
      <div class="project-info">${p.desc ? p.desc : "-"}</div>
      <div style="margin-top:7px">
        <button onclick="delProject(${i})" style="background:#e53935;color:#fff;padding:4px 18px;border-radius:8px;border:0;">Ø­Ø°Ù</button>
      </div>
    </div>
  `
        )
        .join("");
    }
    function addProject() {
      let t = document.getElementById("projTitle").value.trim();
      if (!t) return alert("Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹");
      projects.push({ name: t, desc: "" });
      localStorage.setItem("aw_projects", JSON.stringify(projects));
      document.getElementById("projTitle").value = "";
      renderProjects();
    }
    function delProject(i) {
      if (!confirm("Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ")) return;
      projects.splice(i, 1);
      localStorage.setItem("aw_projects", JSON.stringify(projects));
      renderProjects();
    }
    /* ------------------ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª --------------------- */
    let notes = JSON.parse(localStorage.getItem("aw_notes") || "[]");
    function renderNotes() {
      let grid = document.getElementById("notesList");
      if (!notes.length) {
        grid.innerHTML = '<div style="color:var(--txt-sub);padding:31px 0;text-align:center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø¹Ø¯.</div>';
        return;
      }
      grid.innerHTML = notes
        .map(
          (n, i) => `
    <div class="note-card">
      <div class="note-title">${n.title}</div>
      <div style="margin-bottom:7px">${n.body}</div>
      <button onclick="delNote(${i})" style="background:#e53935;color:#fff;padding:2.5px 16px;border-radius:8px;border:0;">Ø­Ø°Ù</button>
    </div>
  `
        )
        .join("");
    }
    function addNote() {
      let t = document.getElementById("noteTitle").value.trim();
      let b = document.getElementById("noteBody").value.trim();
      if (!t || !b) return alert("Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø·Ù„ÙˆØ¨Ø§Ù†");
      notes.push({ title: t, body: b });
      localStorage.setItem("aw_notes", JSON.stringify(notes));
      document.getElementById("noteTitle").value = "";
      document.getElementById("noteBody").value = "";
      renderNotes();
    }
    function delNote(i) {
      if (!confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©ØŸ")) return;
      notes.splice(i, 1);
      localStorage.setItem("aw_notes", JSON.stringify(notes));
      renderNotes();
    }
    /* ---------- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: ØªØµØ¯ÙŠØ±/Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø´Ø§Ù…Ù„ --------- */
    function exportAllData() {
      const allData = {
        kanban_tasks: tasks,
        aw_projects: projects,
        aw_notes: notes,
      };
      let data = JSON.stringify(allData, null, 2);
      let a = document.createElement("a");
      a.href = "data:application/json," + encodeURIComponent(data);
      a.download = "aliw_backup.json";
      a.click();
    }
    function importAllDataFile(e) {
      let file = e.target.files[0];
      if (!file) return;
      let reader = new FileReader();
      reader.onload = function (evt) {
        try {
          let obj = JSON.parse(evt.target.result);
          if (!obj.kanban_tasks || !obj.aw_projects || !obj.aw_notes) throw "Ù…Ù„Ù ØºÙŠØ± ØµØ­ÙŠØ­";
          tasks = obj.kanban_tasks;
          projects = obj.aw_projects;
          notes = obj.aw_notes;
          localStorage.setItem("kanban_tasks", JSON.stringify(tasks));
          localStorage.setItem("aw_projects", JSON.stringify(projects));
          localStorage.setItem("aw_notes", JSON.stringify(notes));
          renderKanban();
          renderProjects();
          renderNotes();
          alert("ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
        } catch {
          alert("Ù…Ù„Ù ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…");
        }
      };
      reader.readAsText(file);
    }
  </script>
</body>
</html>
